# Phase 2: コア機能開発（4-5週間）

## 概要
アプリのコア機能であるユーザー管理、マッチング、メッセージ機能を実装します。

## チケット一覧

### F2-01: ユーザープロフィール表示・編集
**優先度**: 高  
**工数**: 2日  
**担当**: フロントエンド

#### 作業内容
- プロフィール詳細表示画面
- プロフィール編集画面
- 写真管理機能
- プロフィール完成度表示

#### 完了条件
- [ ] プロフィール詳細が表示される
- [ ] プロフィール編集ができる
- [ ] 写真の追加・削除・並び替えができる
- [ ] プロフィール完成度が正しく計算される

---

### F2-02: 本人確認機能
**優先度**: 高  
**工数**: 3日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- 本人確認書類アップロード機能
- 年齢自動チェック機能（OCR）
- 管理者承認画面（簡易版）
- 確認済みバッジ表示

#### 完了条件
- [ ] 本人確認書類がアップロードできる
- [ ] 年齢が自動チェックされる
- [ ] 管理者が承認・却下できる
- [ ] 確認済みユーザーにバッジが表示される

---

### F2-03: マッチング候補取得API
**優先度**: 高  
**工数**: 2日  
**担当**: バックエンド

#### 作業内容
- マッチングアルゴリズム実装
- 候補者フィルタリング機能
- ブロック・いいね済みユーザー除外
- パフォーマンス最適化

#### 完了条件
- [ ] 適切な候補者が取得される
- [ ] フィルタリングが正常に動作する
- [ ] ブロック・いいね済みユーザーが除外される
- [ ] レスポンス時間が適切（<500ms）

---

### F2-04: お相手候補画面
**優先度**: 高  
**工数**: 3日  
**担当**: フロントエンド

#### 作業内容
- お相手候補一覧表示
- カード型UI実装
- いいね・パス・メッセージボタン
- フィルター機能

#### 完了条件
- [ ] 候補者がカード形式で表示される
- [ ] いいね・パス・メッセージが送信できる
- [ ] フィルター機能が動作する
- [ ] スワイプ操作（モバイル）が動作する

---

### F2-05: いいね・マッチング機能
**優先度**: 高  
**工数**: 2日  
**担当**: バックエンド

#### 作業内容
- いいね送信API
- 相互いいねでマッチ作成
- マッチ通知機能
- リアルタイム更新

#### 完了条件
- [ ] いいねが送信される
- [ ] 相互いいねでマッチが作成される
- [ ] マッチ成立時に通知される
- [ ] リアルタイムでマッチ状態が更新される

---

### F2-06: メッセージ機能（基本）
**優先度**: 高  
**工数**: 3日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- メッセージ一覧画面
- 個別メッセージ画面
- テキストメッセージ送受信
- 既読・未読管理

#### 完了条件
- [ ] メッセージ一覧が表示される
- [ ] メッセージの送受信ができる
- [ ] 既読・未読状態が管理される
- [ ] メッセージが時系列で表示される

---

### F2-07: リアルタイムメッセージ
**優先度**: 中  
**工数**: 2日  
**担当**: バックエンド

#### 作業内容
- Supabase Realtime統合
- リアルタイムメッセージ配信
- オンライン状態管理
- 接続状態管理

#### 完了条件
- [ ] メッセージがリアルタイムで配信される
- [ ] オンライン状態が表示される
- [ ] 接続が安定している
- [ ] パフォーマンスが良好

---

### F2-08: 通知機能（基本）
**優先度**: 中  
**工数**: 2日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- 通知一覧画面
- インアプリ通知表示
- 通知設定画面
- メール通知（基本）

#### 完了条件
- [ ] 通知一覧が表示される
- [ ] インアプリ通知が動作する
- [ ] 通知設定ができる
- [ ] メール通知が送信される

---

### F2-09: ホーム画面（ダッシュボード）
**優先度**: 中  
**工数**: 2日  
**担当**: フロントエンド

#### 作業内容
- ダッシュボード画面実装
- おすすめユーザー表示
- アクティビティ表示
- 統計情報表示

#### 完了条件
- [ ] ダッシュボードが表示される
- [ ] おすすめユーザーが表示される
- [ ] 最近のアクティビティが表示される
- [ ] 基本統計が表示される

---

### F2-10: 検索・フィルター機能
**優先度**: 中  
**工数**: 2.5日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- ユーザー検索機能
- 詳細フィルター（年齢、地域、趣味等）
- 検索結果表示
- フィルター設定保存

#### 完了条件
- [ ] キーワード検索ができる
- [ ] 詳細フィルターが動作する
- [ ] 検索結果が適切に表示される
- [ ] フィルター設定が保存される

---

### F2-11: ブロック・通報機能
**優先度**: 中  
**工数**: 2日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- ユーザーブロック機能
- 通報機能（ユーザー・メッセージ）
- ブロック解除機能
- 通報管理画面（簡易版）

#### 完了条件
- [ ] ユーザーをブロックできる
- [ ] 不適切なコンテンツを通報できる
- [ ] ブロックしたユーザーが非表示になる
- [ ] 通報内容が記録される

---

### F2-12: プロフィール設定・アカウント管理
**優先度**: 中  
**工数**: 2日  
**担当**: フロントエンド

#### 作業内容
- アカウント設定画面
- プライバシー設定
- 通知設定詳細
- アカウント削除機能

#### 完了条件
- [ ] アカウント設定ができる
- [ ] プライバシー設定ができる
- [ ] 通知設定の詳細調整ができる
- [ ] アカウント削除ができる

---

### F2-13: セキュリティ強化
**優先度**: 高  
**工数**: 1.5日  
**担当**: バックエンド

#### 作業内容
- Row Level Security (RLS) 実装
- API認証強化
- データ暗号化
- セキュリティテスト

#### 完了条件
- [ ] RLSが正常に動作する
- [ ] API認証が強化されている
- [ ] 機密データが暗号化されている
- [ ] セキュリティテストをパスする

---

### F2-14: パフォーマンス最適化
**優先度**: 中  
**工数**: 1.5日  
**担当**: フロントエンド + バックエンド

#### 作業内容
- データベースクエリ最適化
- 画像最適化
- キャッシュ機能実装
- パフォーマンス測定

#### 完了条件
- [ ] データベースクエリが最適化されている
- [ ] 画像読み込みが高速化されている
- [ ] キャッシュが適切に動作する
- [ ] パフォーマンス目標を達成している

---

## Phase 2 完了条件

### 必須条件
- [ ] ユーザー同士がマッチできる
- [ ] メッセージの送受信ができる
- [ ] 基本的な検索・フィルタができる
- [ ] プロフィール管理ができる

### 確認事項
- [ ] マッチングアルゴリズムが正常に動作する
- [ ] リアルタイムメッセージが安定している
- [ ] セキュリティが適切に実装されている
- [ ] パフォーマンスが良好である

---

**見積もり工数**: 28-32人日  
**推奨期間**: 4-5週間  
**前フェーズ**: [Phase 1: 基盤構築](./phase-1-foundation.md)  
**次フェーズ**: [Phase 3: コミュニティ機能](./phase-3-community.md)